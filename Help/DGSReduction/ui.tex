A graphical user interface (GUI) is available for running the direct geometry reduction algorithm outlined in Section \ref{sec:Algs}. This is available via the \textit{MantidPlot} analysis workbench. The GUI is launched from within \textit{MantidPlot} from the \textit{Interfaces} menu and selecting the \textit{DGS Reduction} menu entry. The GUI can also be used to export a Python script once the appropriate fields are filled for a reduction pass. The GUI also allows one to see the parameters outlined in Section \ref{sec:Algs} that are read from the parameter file. 

Once launched, the user is presented with the following layout (Figure~\ref{fig:SamSet}). The current instrument that is being requested for reduction is shown in the title bar of the GUI. To switch the reduction to a different instrument, use the \textit{Tools} menus and select the \textit{Change Instrument...} menu entry. 
\begin{figure}[ht]
\centerline{\includegraphics[width=0.75\textwidth]{figures/SampleSetup.png}}
\caption{Sample Setup tab on the DGS Reduction GUI}
\label{fig:SamSet}
\end{figure}
Besides the tab that shows up on launch, there are three other tabs for parameter entry. Each tab will be discussed individually in the next sections. To get start quickly, a reduction can be run with a minimal amount of information entered into the \textit{Sample Setup} tab. A file can be entered into the \textit{Sample Data} field. For SNS instruments, this is all that is required. ISIS instruments will require an entry in the \textit{Incident Energy Guess} field in order to run. Once this minimal information is entered, the \textit{Reduce} button can be clicked to execute the reduction. A Python script can be saved to a file by clicking the \textit{Export} button and filling in a file name to the subsequent dialog.
\subsection{Sample Setup}
As described earlier, the \textit{Sample Data} entry is the place to put a file (run) for reduction. The \textit{Browse} buttons allows you to locate that file via the standard file finder dialog. If this field is not filled in, the background color is yellow indicating that this field needs to be filled in before running reduction. The next field, \textit{Output Workspace Name}, allows you to control the name of the workspace as it appears in the \textit{MantidPlot} workspace listing. If nothing is entered, a default workspace name is created based on the sample file name without extension and the addition of this tag: '\_spe'. The \textit{DetCal File} entry is specific to ISIS instruments. Under normal circumstances, the detcal file is just the input sample file, but this does not have to be the case. This entry can be used to point to a different detcal file for use in the reduction. The \textit{Relocate Detectors} checkbox controls a parameter that can relocate the detectors in the \textit{LoadDetectorInfo} \textit{Mantid} algorithm that is run. 

Turning to the Incident Energy Calculation section of the UI, the first entry field is \textit{Incident Energy Guess}. For ISIS instruments, if not entry is made, the background color is yellow indicating this field need to be filled in before running reduction. SNS instruments do not require an entry since the reduction algorithm will use the \textit{EnergyRequest} log to determine a guess. If you wish to not have the reduction calculate the incident energy, but just use the value provided, you can check the \textit{Use Guess (No Calculation)} checkbox. Checking this option enables the \textit{TZero Guess} entry, which has a default value of zero microseconds and allows that parameter to be adjusted in accordance with the initial energy. The last set of entries deals with the \textit{Monitor Spectrum IDs} used to perform the initial energy calculation. These two values are read from the parameter file, so by default this is what the reduction algorithm uses. The entries allow you to override the IDs in order to use different monitors to perform the calculation.

The next section is the \textit{Energy Transfer Range} entries. The first three entries allow you to specify the binning strategy for the x-axis of the output $S(\phi, E)$. If no values are entered, a default binning strategy is constructed by the reduction algorithm. Using the initial energy guess, $E_i$, the low, width and high values are $-0.5E_i$, $0.01E_i$, $E_i$. If you want to fill in values, all the entries must be filled. The last option is the \textit{S(Phi, E) is distribution} checkbox. This option causes the resulting $S(\phi, E)$ to be converted to $\frac{dS(\phi, E)}{dEd\phi}$ histogram workspace by dividing by the bin width from the x-axis binning. Disabling this option stops this division and will keep an event workspace as the final result if the input was an event workspace. 

The first of the last set of options allows one to apply a hard mask to the data by setting a file in the \textit{Hard Mask} entry. A grouping file (sometimes know as a mapping file) which aggregates data into large blocks can be applied to the data by setting a file in the \textit{Grouping} entry. Finally, the \textit{Show Intermediate Workspaces} can be used to display workspaces created during the reduction process in addition to the output workspace. 
\subsection{Data Corrections}
This tab (Figure~\ref{fig:DataCorr}) deals with corrections that are applied to the sample data. The first set of entries deals with the \textit{Incident Beam Normalisation}. This group of radio buttons allows one to pick the type of incident beam normalisation to perform. The default, \textit{None}, performs no normalisation on the data. The \textit{Current} option divides the data by its corresponding value of the proton charge. The \textit{Monitor 1} option uses the monitor specified in the parameter file to integrate the TOF range given in the \textit{Integration Range} entries. The values in these entries are also read from the parameter file. The radio buttons enforce that only one type of incident beam monitor normalisation can be performed on all input datasets.

\begin{figure}[ht]
\centerline{\includegraphics[width=0.75\textwidth]{figures/DataCorrections.png}}
\caption{Data Corrections tab on the DGS Reduction GUI}
\label{fig:DataCorr}
\end{figure}

The next section is deals with the \textit{Time-Independent Background Subtraction} parameters. Here, the two entries represent the TOF range in between which the background value will be determined. These parameters are also read from the parameter file. The \textit{Correct Ki/Kf} option allows you to turn off this particular correction since the default is to apply this correction.

The last section deals with the \textit{Detector Vanadium} that is associated with the sample input data. The \textit{Input} entry is where you can input a detector vanadium file (run) for use in the reduction. The \textit{Browse} button will allow you to search for the file via the normal file dialog. The \textit{Use Processed} checkbox allows you to tell the reduction that the file you are providing has already been processed and just needs to be used as is in the reduction. How you save a processed detector vanadium will be covered soon. If \textit{Used Processed} is checked, all the following entries are cleared and disabled. If not, you can request specific bounds by checking the \textit{Use Bounds?} checkbox. This activates the \textit{Range} entries, in which you can specify the bounds of the integration for the detector vanadium. The default values are those found in the associated instrument parameter file. The units on the bounds are assumed to be energy in the parameter file. You can use the combobox at the end of the \textit{Range} entries to set the units on the integration bounds. The available options are Energy, Wavelength and TOF. Setting the units to anything other than TOF will causea unit conversion to occur on the detector vanadium data. The last options are used for if you are processing the detector vanadium for the first time. Checking the \textit{Save Processed} checkbox allows you to save a NeXus file containing the processed detector vanadium. Using this checkbox activates the Filename entry so that you can provide an output file name for the saved file. If you do not put anything into the entry, a default file name will be created and looks like "\textit{\textless OutputWorkspaceName \textgreater}\_idetvan.nxs". 
\subsection{Diagnose Detectors}
This tab (Figure~\ref{fig:DiagDet}) deals with performing diagnostic tests on the detector vanadium data being used in the reduction as well as the sample data for the reduction. On this tab, almost all of the entries and checkbox states are read from the instrument parameter file. The only exception is the \textit{Detector Van 2} entry. These parameters are the ones that the reduction algorithm will use in the diagnostic tests unless the values are changed in the GUI. 

\begin{figure}[ht]
\centerline{\includegraphics[width=0.75\textwidth]{figures/DiagnoseDetectors.png}}
\caption{Diagnose Detectors tab on the DGS Reduction GUI}
\label{fig:DiagDet}
\end{figure}

The first section, \textit{Detector Vanadium Tests}, deals with the parameters used for the two tests (\textit{FindDetectorsOutsideLimits} and \textit{MedianDetectorTest}) run on the detector vanadium data. The \textit{High counts} and \textit{Low counts} parameters are used in the \textit{FindDetectorsOutsideLimits} algorithm to determine hot and cold pixels in the data. All of the other parameters in this section are used in the \textit{MedianDetectorTest} algorithm. 

The \textit{Efficiency Variation Test} section uses a second set of detector vanadium data to compare against the original detector vanadium data. 

The \textit{Background Check} checkbox activates the parameters below it and will perform a \textit{MedianDetectorTest} on a sample workspace that has been incident beam normalised and integrated over the background range given by the \textit{TOF Start} and \textit{TOF End} entry parameters.

The \textit{Reject zero background} checkbox activates a \textit{FindDetectorsOutsideLimits} test on a sample workspace that has been incident beam normalised and integrated over the entire range of data present (one number per detector pixel or total counts). This test is hard-wired to check for detector pixels having their total counts between $1\times10^{-10}$ and $1\times10^{100}$. 

The \textit{PSD Bleed} checkbox triggers the activation of the \textit{CreatePSDBleedMask} test.
This test uses the \textit{Max Framerate} and \textit{Ignored pixels} parameters to determine which tubes are counting above the maximum frame rate. These tubes will be masked if they fail this check. The ignored pixels parameter tells how many pixels around the central region are ignored in the check.
\subsection{Absolute Units}
This tab (Figure~\ref{fig:AbsUnits}) handles collecting the data and parameters for calculating the absolute units normalisation data. Checking the \textit{Perform Absolute Normalisation} checkbox will activate this reduction procedure. 

\begin{figure}[ht]
\centerline{\includegraphics[width=0.75\textwidth]{figures/AbsoluteUnits.png}}
\caption{Absolute Units tab on the DGS Reduction GUI}
\label{fig:AbsUnits}
\end{figure}

The first section, \textit{Run Files}, handles setting the appropriate data files for the absolute units calculation. The \textit{AbsUnits Vanadium} entry allows you to set the appropriate file (run) containing the absolute units sample data. As usual, the \textit{Browse} button can be used to navigate to a file.